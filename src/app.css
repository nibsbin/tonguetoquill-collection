@import url('https://fonts.googleapis.com/css2?family=Crimson+Text:ital,wght@0,400;0,600;0,700;1,400;1,600;1,700&family=Lato:ital,wght@0,100;0,300;0,400;0,700;0,900;1,100;1,300;1,400;1,700;1,900&display=swap');
@import 'tailwindcss';

:root {
	/* Spacing & Layout Tokens */
	--radius: 0.625rem;
	--radius-sm: calc(var(--radius) - 4px);
	--radius-md: calc(var(--radius) - 2px);
	--radius-lg: var(--radius);
	--radius-xl: calc(var(--radius) + 4px);

	/* Sidebar spacing tokens */
	--sidebar-padding: 0.5rem; /* 8px - padding for expanded button labels */
	--sidebar-button-size: 2.5rem; /* 40px - exact size of icon buttons */
	--sidebar-icon-size: 1.5rem; /* 24px - size of icons within buttons */
	--sidebar-collapsed-width: 3rem;
	--sidebar-expanded-width: 16rem;

	/* Derived tokens - calculated for perfect centering */
	--sidebar-slot-width-collapsed: var(--sidebar-collapsed-width); /* 48px slot width */
	--sidebar-slot-height: var(--sidebar-collapsed-width); /* 48px slot height (square) */
	--sidebar-button-spacing: calc(
		(var(--sidebar-collapsed-width) - var(--sidebar-button-size)) / 2
	); /* 4px - centers 40px button in 48px slot */

	/* Top menu spacing tokens */
	--top-menu-height: var(--sidebar-collapsed-width); /* Aligned with sidebar */

	/* Z-Index Layer System - Simplified into 3 groups */
	/* Group 1: Canvas - UI and overlays within canvas/preview area */
	--z-canvas-ui: 10; /* UI elements within the canvas (e.g., sidebar) */
	--z-canvas-overlay: 20; /* Tool overlays scoped to canvas (e.g., ruler) */

	/* Sidebar specific z-indices */
	--z-content: 0; /* Main content base layer */
	--z-sidebar-backdrop: 40; /* Backdrop overlay when sidebar is expanded */
	--z-sidebar: 50; /* Sidebar overlay */

	/* Group 2: Minor Widgets - Lightweight overlays */
	--z-dropdown: 1000; /* Dropdown menus and select options */
	--z-popover: 1100; /* Popovers - lightweight contextual UI */
	--z-toast: 1200; /* Toast notifications */
	--z-banner: 1300; /* Notification banners */

	/* Group 3: Modals - Full attention overlays */
	--z-modal-backdrop: 1400; /* Dialog/modal backdrops */
	--z-modal-content: 1500; /* Dialog/modal/sheet content */

	/* Light Theme Color Tokens */
	/* Surface colors */
	--color-background: #ffffff;
	--color-foreground: #09090b;
	--color-muted-foreground: #52525b;
	--color-foreground-shadow: rgb(from var(--color-foreground) r g b / 0.24);
	--color-surface: #f4f4f5;
	--color-surface-elevated: #fafafa;

	/* Interactive states */
	--color-primary: #18181b;
	--color-primary-foreground: #fafafa;
	--color-secondary: #f4f4f5;
	--color-secondary-foreground: #18181b;

	/* Semantic colors */
	--color-muted: #f4f4f5;
	--color-muted-foreground: #71717a;
	--color-accent: #f4f4f5;
	--color-accent-foreground: #18181b;
	--color-destructive: #ef4444;
	--color-destructive-hover: #dc2626;
	--color-destructive-foreground: #fafafa;

	/* UI elements */
	--color-border: #e4e4e7;
	--color-border-hover: #d4d4d8;
	--color-input: #e4e4e7;
	--color-ring: #18181b;

	/* Syntax highlighting colors (light mode) */
	--color-syntax-keyword: #355e93;
	--color-syntax-key: #355e93;
	--color-syntax-metadata-bg: rgba(53, 94, 147, 0.035);
	--color-syntax-comment: #71717a; /* zinc-500 - muted gray for comments */

	/* Error/Diagnostic colors */
	--color-error: #ef4444; /* red-500 base */
	--color-error-foreground: #991b1b; /* red-800 dark text */
	--color-error-background: #fef2f2; /* red-50 light bg */
	--color-error-border: #fecaca; /* red-200 subtle border */

	/* Warning/Hint colors */
	--color-warning: #f59e0b; /* amber-500 base */
	--color-warning-foreground: #78350f; /* amber-900 dark text */
	--color-warning-background: #fffbeb; /* amber-50 light bg */
	--color-warning-border: #fde68a; /* amber-200 subtle border */

	/* Success colors */
	--color-success: #16a34a; /* green-600 base */
	--color-success-foreground: #14532d; /* green-900 dark text */
	--color-success-background: #f0fdf4; /* green-50 light bg */
	--color-success-border: #bbf7d0; /* green-200 subtle border */

	/* Info colors */
	--color-info: #2563eb; /* blue-600 base */
	--color-info-foreground: #1e3a8a; /* blue-900 dark text */
	--color-info-background: #eff6ff; /* blue-50 light bg */
	--color-info-border: #bfdbfe; /* blue-200 subtle border */
}

/* Dark Theme */
.dark {
	/* Surface colors */
	--color-background: #18181b;
	--color-foreground: #f4f4f5;
	--color-muted-foreground: #a8a8b3;
	--color-foreground-shadow: rgb(from var(--color-foreground) r g b / 1);
	--color-surface: #27272a;
	--color-surface-elevated: #27272a;

	/* Interactive states */
	--color-primary: #fafafa;
	--color-primary-foreground: #18181b;
	--color-secondary: #27272a;
	--color-secondary-foreground: #fafafa;

	/* Semantic colors */
	--color-muted: #27272a;
	--color-accent: #3f3f46;
	--color-accent-foreground: #f4f4f5;
	--color-destructive-foreground: #fafafa;

	/* UI elements */
	--color-border: #3f3f46;
	--color-border-hover: #52525b;
	--color-input: #27272a;
	--color-ring: #d4d4d8;

	/* Syntax highlighting colors (dark mode) */
	--color-syntax-keyword: #7aacd4;
	--color-syntax-key: #3a85b6;
	--color-syntax-metadata-bg: rgba(53, 94, 147, 0.05);
	--color-syntax-comment: #a1a1aa; /* zinc-400 - lighter muted gray for dark mode */

	/* Error/Diagnostic colors */
	--color-error: #cc1111; /* red-500 base (unchanged) */
	--color-error-foreground: #fecaca; /* red-200 light text */
	--color-error-background: #450a0a; /* red-950 dark bg */
	--color-error-border: #771b1b; /* red-800 stronger border */

	/* Warning/Hint colors */
	--color-warning: #f59e0b; /* amber-500 base (unchanged) */
	--color-warning-foreground: #fde68a; /* amber-200 light text */
	--color-warning-background: #451a03; /* amber-950 dark bg */
	--color-warning-border: #78350f; /* amber-800 stronger border */

	/* Success colors */
	--color-success: #22c55e; /* green-500 base */
	--color-success-foreground: #bbf7d0; /* green-200 light text */
	--color-success-background: #14532d; /* green-900 dark bg */
	--color-success-border: #166534; /* green-800 stronger border */

	/* Info colors */
	--color-info: #3b82f6; /* blue-500 base */
	--color-info-foreground: #bfdbfe; /* blue-200 light text */
	--color-info-background: #1e3a8a; /* blue-900 dark bg */
	--color-info-border: #1e40af; /* blue-800 stronger border */
}

/* Tailwind CSS Integration - required for utility class generation */
@theme inline {
	/* Z-Index layers - Maps to CSS variables */
	--z-canvas-ui: var(--z-canvas-ui);
	--z-canvas-overlay: var(--z-canvas-overlay);
	--z-content: var(--z-content);
	--z-sidebar-backdrop: var(--z-sidebar-backdrop);
	--z-sidebar: var(--z-sidebar);
	--z-dropdown: var(--z-dropdown);
	--z-popover: var(--z-popover);
	--z-toast: var(--z-toast);
	--z-banner: var(--z-banner);
	--z-modal-backdrop: var(--z-modal-backdrop);
	--z-modal-content: var(--z-modal-content);

	/* Surface colors */
	--color-background: var(--color-background);
	--color-foreground: var(--color-foreground);
	--color-surface: var(--color-surface);
	--color-surface-elevated: var(--color-surface-elevated);

	/* Interactive states */
	--color-primary: var(--color-primary);
	--color-primary-foreground: var(--color-primary-foreground);
	--color-secondary: var(--color-secondary);
	--color-secondary-foreground: var(--color-secondary-foreground);

	/* Semantic colors */
	--color-muted: var(--color-muted);
	--color-muted-foreground: var(--color-muted-foreground);
	--color-accent: var(--color-accent);
	--color-accent-foreground: var(--color-accent-foreground);
	--color-destructive: var(--color-destructive);
	--color-destructive-hover: var(--color-destructive-hover);
	--color-destructive-foreground: var(--color-destructive-foreground);

	/* UI elements */
	--color-border: var(--color-border);
	--color-border-hover: var(--color-border-hover);
	--color-input: var(--color-input);
	--color-ring: var(--color-ring);

	/* Error/Diagnostic colors */
	--color-error: var(--color-error);
	--color-error-foreground: var(--color-error-foreground);
	--color-error-background: var(--color-error-background);
	--color-error-border: var(--color-error-border);

	/* Warning/Hint colors */
	--color-warning: var(--color-warning);
	--color-warning-foreground: var(--color-warning-foreground);
	--color-warning-background: var(--color-warning-background);
	--color-warning-border: var(--color-warning-border);

	/* Success colors */
	--color-success: var(--color-success);
	--color-success-foreground: var(--color-success-foreground);
	--color-success-background: var(--color-success-background);
	--color-success-border: var(--color-success-border);

	/* Info colors */
	--color-info: var(--color-info);
	--color-info-foreground: var(--color-info-foreground);
	--color-info-background: var(--color-info-background);
	--color-info-border: var(--color-info-border);
}

body {
	font-family: 'Lato', Arial, sans-serif;
	margin: 0;
	padding: 0;
	overflow: hidden;
	transition:
		background-color 200ms ease-in-out,
		color 200ms ease-in-out;
}

button {
	cursor: pointer;
}

/* Utility class: slightly heavier top-menu divider for visual alignment/theming */
.top-menu-strong-border {
	/* Only controls border styling; height is managed by --top-menu-height variable */
	border-bottom-width: 1.5px;
}

/* Typography Utilities - Consistent text styling using semantic tokens */

/* Base text colors */
.text-base {
	color: var(--color-foreground);
}

/* Headings - using semantic foreground color */
h1,
h2,
h3,
h4,
h5,
h6,
.heading {
	color: var(--color-foreground);
	font-weight: 600;
}

/* Paragraphs and body text */
p,
.body-text {
	color: var(--color-foreground);
	line-height: 1.75;
}

/* Links */
a:not(.no-style) {
	color: var(--color-primary);
	text-decoration: none;
}

a:not(.no-style):hover {
	opacity: 0.8;
}

/* Lists */
ul,
ol {
	color: var(--color-foreground);
}

li {
	color: var(--color-foreground);
}

/* Strong/bold text */
strong,
b {
	color: var(--color-foreground);
	font-weight: 600;
}

/* Emphasized text */
em,
i {
	color: var(--color-foreground);
}

/* Code blocks */
code {
	color: var(--color-foreground);
	background-color: var(--color-muted);
	padding: 0.125rem 0.25rem;
	border-radius: 0.25rem;
	font-size: 0.875em;
}

pre code {
	background-color: transparent;
	padding: 0;
}

/* Prose container - for long-form content */
.prose {
	color: var(--color-foreground);
	max-width: none;
}

.prose h1,
.prose h2,
.prose h3,
.prose h4,
.prose h5,
.prose h6 {
	color: var(--color-foreground);
	font-weight: 600;
}

.prose p,
.prose li {
	color: var(--color-foreground);
	line-height: 1.75;
}

.prose strong {
	color: var(--color-foreground);
	font-weight: 600;
}

.prose a {
	color: var(--color-primary);
	text-decoration: none;
}

.prose a:hover {
	opacity: 0.8;
}

/* Widget-specific prose styling */
.widget-prose {
	color: var(--color-foreground);
}

.widget-prose h1,
.widget-prose h2,
.widget-prose h3,
.widget-prose h4,
.widget-prose h5,
.widget-prose h6 {
	color: var(--color-foreground);
	font-weight: 600;
}

.widget-prose p,
.widget-prose li {
	color: var(--color-foreground);
	line-height: 1.75;
}

.widget-prose strong {
	color: var(--color-foreground);
	font-weight: 600;
}

.widget-prose a {
	color: var(--color-primary);
	text-decoration: none;
}

.widget-prose a:hover {
	opacity: 0.8;
}

/* Scrollbar styling for widgets */
.widget-scrollbar::-webkit-scrollbar {
	width: 8px;
}

.widget-scrollbar::-webkit-scrollbar-track {
	background: var(--color-muted);
	border-radius: 4px;
}

.widget-scrollbar::-webkit-scrollbar-thumb {
	background: color-mix(in srgb, var(--color-muted-foreground) 30%, transparent);
	border-radius: 4px;
}

.widget-scrollbar::-webkit-scrollbar-thumb:hover {
	background: color-mix(in srgb, var(--color-muted-foreground) 50%, transparent);
}

/* Screen reader only utility */
.sr-only {
	position: absolute;
	width: 1px;
	height: 1px;
	padding: 0;
	margin: -1px;
	overflow: hidden;
	clip: rect(0, 0, 0, 0);
	white-space: nowrap;
	border-width: 0;
}

.focus\:not-sr-only:focus {
	position: static;
	width: auto;
	height: auto;
	padding: inherit;
	margin: inherit;
	overflow: visible;
	clip: auto;
	white-space: normal;
}

/* Z-Index Utility Classes */
.z-canvas-ui {
	z-index: var(--z-canvas-ui);
}

.z-canvas-overlay {
	z-index: var(--z-canvas-overlay);
}

.z-content {
	z-index: var(--z-content);
}

.z-sidebar-backdrop {
	z-index: var(--z-sidebar-backdrop);
}

.z-sidebar {
	z-index: var(--z-sidebar);
}

.z-dropdown {
	z-index: var(--z-dropdown);
}

.z-popover {
	z-index: var(--z-popover);
}

.z-toast {
	z-index: var(--z-toast);
}

.z-banner {
	z-index: var(--z-banner);
}

.z-modal-backdrop {
	z-index: var(--z-modal-backdrop);
}

.z-modal-content {
	z-index: var(--z-modal-content);
}
